<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Golden Bazar — Restoran</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="css/style.css">

</head>
<body>

  <!-- NAV -->
  <nav class="navbar navbar-expand-lg py-3" style="background:transparent">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-3" href="#">
        <div style="width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#ffdca3);display:flex;align-items:center;justify-content:center;color:#071122;font-weight:700">GB</div>
        <div class="d-none d-lg-block">
          <div class="brand">Golden Bazar</div>
          <div class="slogan">Taom va san'at uchrashuvi</div>
        </div>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
          <li class="nav-item"><a class="nav-link text-light" href="#menu">Menu</a></li>
          <li class="nav-item"><a class="nav-link text-light" href="#about">Biz haqimizda</a></li>
          <li class="nav-item"><a class="nav-link text-light" href="#contact">Aloqa</a></li>
          <li class="nav-item ms-3"><button class="btn btn-outline-light" id="openCart">Savatcha</button></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="hero">
    <div class="container">
      <h1 class="brand">Golden Bazar</h1>
      <p class="slogan mt-2">Har bir taom — xotiraga aylansin. Tez va ishonchli yetkazib berish.</p>
      <div class="mt-4 d-flex justify-content-center gap-3">
        <a href="#menu" class="btn btn-accent">Menyuga o'tish</a>
        <button class="btn-accent" id="heroOrder">Buyurtma berish</button>
      </div>
    </div>
  </header>

  <!-- MENU -->
  <section id="menu" class="py-5">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Menyu</h2>
        <p class="text-muted mb-0">Eng mashhur taomlarimiz</p>
      </div>

      <div class="menu-grid" id="menuGrid">
        <!-- JS will inject menu cards here -->
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="py-5 border-top" style="border-color:rgba(255,255,255,0.03)">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-6 mb-4">
          <h3>Biz haqimizda</h3>
          <p class="text-muted">Golden Bazar — an'anaviy taomlarni zamonaviy taqdim etamiz. Mahsulotlarimiz yangi, taomlarimiz esa sevgimiz bilan tayyorlanadi.</p>
          <ul class="text-muted">
            <li>Foydalaniladigan mahsulotlar — mahalliy va sifatli</li>
            <li>Tez yetkazib berish va ishonchli xizmat</li>
            <li>Buyurtmalarni onlayn qabul qilish</li>
          </ul>
        </div>
        <div class="col-lg-6">
          <div style="border-radius:12px;overflow:hidden;box-shadow:0 12px 30px rgba(2,6,12,0.6)">
            <img src="https://images.unsplash.com/photo-1541542684-1b4b1e4d3b1f?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=placeholder" alt="rest" style="width:100%;height:320px;object-fit:cover;display:block">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="py-5">
    <div class="container">
      <h3>Aloqa</h3>
      <div class="row mt-3">
        <div class="col-md-6">
          <p class="text-muted mb-1">Manzil: Toshkent, Chilonzor</p>
          <p class="text-muted mb-1">Telefon: +998 90 123 45 67</p>
          <p class="text-muted">Ish vaqti: 09:00 — 23:00</p>
        </div>
        <div class="col-md-6">
          <div style="height:180px;background:var(--glass);border-radius:10px;display:flex;align-items:center;justify-content:center;color:var(--muted)">Xaritani shu yerga joylashtiring (Netlify-da Google Map iframe ishlaydi)</div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">&copy; <strong>Golden Bazar</strong> — Barcha huquqlar himoyalangan</div>
  </footer>

  <!-- Floating cart button -->
  <button class="cart-btn" id="openCartBtn">Savatcha (0)</button>

  <!-- Offcanvas cart -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="cartPanel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title">Savatcha</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body offcanvas-custom p-3">
      <div id="cartItems"></div>
      <hr />
      <form id="orderForm">
        <div class="mb-2">
          <label class="form-label">Ism</label>
          <input required class="form-control" id="customerName" placeholder="Ismingiz">
        </div>
        <div class="mb-2">
          <label class="form-label">Telefon</label>
          <input required class="form-control" id="customerPhone" placeholder="+998...">
        </div>
        <div class="mb-2">
          <label class="form-label">Manzil</label>
          <input required class="form-control" id="customerAddress" placeholder="Yetkazib berish manzili">
        </div>
        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-accent flex-grow-1">Buyurtma yuborish</button>
          <button type="button" class="btn btn-outline-light" id="clearCart">Tozalash</button>
        </div>
      </form>
      <div class="mt-3 text-muted" style="font-size:13px">Eslatma: bot token serverda saqlanadi — xavfsiz. Netlify Functions ishlatiladi.</div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script src="js/script.js">
  </script>

  <!--
    NETLIFY FUNCTION (save as: /netlify/functions/sendOrder.js)

    // Node.js (CommonJS) example for Netlify Functions
    // deploy this file to Netlify Functions. Set two Environment Variables in Netlify dashboard:
    // TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID

    Example code (sendOrder.js):

    -------------------- sendOrder.js --------------------
    const fetch = require('node-fetch');

    exports.handler = async (event, context) => {
      if (event.httpMethod !== 'POST') return { statusCode: 405, body: JSON.stringify({ message: 'Method Not Allowed' }) };
      try {
        const body = JSON.parse(event.body);
        const { name, phone, addr, items, total } = body;
        const botToken = process.env.TELEGRAM_BOT_TOKEN;
        const chatId = process.env.TELEGRAM_CHAT_ID;
        if(!botToken || !chatId) return { statusCode:500, body: JSON.stringify({ message: 'Bot token yoki chat id sozlanmagan' }) };

        let text = `*YANGI BUYURTMA*
`;
        text += `Mijoz: ${name}
Telefon: ${phone}
Manzil: ${addr}

Taomlar:
`;
        items.forEach(i=>{ text += `- ${i.title} x ${i.qty} = ${ (i.price*i.qty).toLocaleString() } so'm
`; });
        text += `
Jami: ${total.toLocaleString()} so'm`;

        const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
        const res = await fetch(url, {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ chat_id: chatId, text, parse_mode: 'Markdown' })
        });
        const data = await res.json();
        if(!data.ok) return { statusCode: 500, body: JSON.stringify({ message: 'Telegram xatoligi', data }) };
        return { statusCode: 200, body: JSON.stringify({ ok: true, data }) };
      } catch(err){
        console.error(err);
        return { statusCode:500, body: JSON.stringify({ message: 'Server error', error: String(err) }) };
      }
    };
    -------------------- END sendOrder.js --------------------

    Deploy notes:
    1) Put this project (index.html + any assets) into a GitHub repo.
    2) In Netlify, connect the repo and set Build command: none (for static) or leave default, and publish directory: "." (root) OR simply drag-and-drop the folder to Netlify.
    3) Add two environment variables in Netlify site settings: TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID.
    4) Netlify will automatically deploy the function from /netlify/functions folder.
    5) After deploy, client-side JS calls /.netlify/functions/sendOrder and token remains secret on serverless side.
  -->

</body>
</html>
